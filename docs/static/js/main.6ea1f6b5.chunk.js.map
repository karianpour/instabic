{"version":3,"sources":["pages/Home.tsx","components/FileChooser.tsx","containers/ImageFilter.tsx","icons/CloseIcon.tsx","icons/DownloadIcon.tsx","pages/FilterPage.tsx","utils/filedownloader.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Home","handleStart","className","onClick","FileChooser","onSelected","React","useState","dragOver","setDragOver","inputRef","useRef","handleSelected","file","URL","createObjectURL","handleIgnore","e","preventDefault","stopPropagation","handleEnter","onDragEnter","onDragLeave","onDragOver","onDrop","dataTransfer","files","length","console","log","type","tabIndex","onKeyUp","key","current","click","accept","onChange","target","ref","MAIN_IMAGE_KEY","getScaleAndPositionContain","oImg","canvas","canvasWidth","width","canvasHeight","height","imgWidth","imgHeight","scale","Math","min","left","top","getMainImage","getObjects","find","o","name","Filters","createFilters","fabric","Image","filters","Blur","blur","Vintage","Sepia","sepia","forwardRef","ImageFilter","url","useFabricJSEditor","editor","onReady","useImperativeHandle","getImageUrl","toDataURL","format","quality","handleApplyFilter","filter","mainImage","splice","push","applyFilters","renderAll","handleResize","useEffect","window","addEventListener","removeEventListener","fromURL","selectable","hoverCursor","add","map","Filter","onApplyFilter","handleClick","max","getScaleAndPositionCover","onPointerUp","CloseIcon","props","viewBox","fill","xmlns","fillRule","clipRule","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","DownloadIcon","version","FilterPage","onClose","setUrl","imageRef","dataUrl","filename","a","document","createElement","href","download","clickHandler","setTimeout","revokeObjectURL","downloadUrl","App","started","setStarted","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6ea1f6b5.chunk.js","sourcesContent":["import './home.css';\n\nexport default function Home({handleStart}: {handleStart: ()=> void}){\n\n  return (\n    <>\n      <header className=\"flex-col\">\n        <h1>Instagram like photo editor.</h1>\n      </header>\n      <div className=\"home__container flex-col\">\n        <p>This is a project to test fabricjs, typescript and reactjs.</p>\n        <p>\n          It lets you select a photo, apply a filter to it and download it.<br/>\n          It is responsive.<br/>\n          It has a good test suit.\n        </p>\n        <button className=\"home__start\" onClick={handleStart}>Start</button>\n      </div>\n      <footer className=\"flex-col\">\n        <p>By Kayvan Arianpour</p>\n      </footer>\n    </>\n  )\n}","import React from \"react\";\nimport \"./FileChooser.css\";\n\nexport function FileChooser({onSelected}:{onSelected: (url: string)=>void}) {\n  const [dragOver, setDragOver] = React.useState(false);\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const handleSelected = (file: File) => {\n    onSelected(URL.createObjectURL(file));\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    handleIgnore(e);\n    if (e.target.files && e.target.files.length > 0) {\n      const file = e.target.files[0];\n      if(file.type==='image/jpeg'){\n        handleSelected(file);\n      }\n    }\n  };\n\n  const handleKey = (e: React.KeyboardEvent)=> {\n    if(e.key===' ' || e.key==='Enter'){\n      inputRef.current?.click();\n    }\n  }\n\n  const handleDrop = (e: React.DragEvent<HTMLInputElement>) => {\n    handleIgnore(e);\n    setDragOver(false);\n    if(e.dataTransfer?.files && e.dataTransfer?.files.length > 0){\n      const file = e.dataTransfer.files[0];\n      console.log(file.type)\n      if(file.type==='image/jpeg'){\n        handleSelected(file);\n      }\n    }\n  };\n\n  const handleIgnore = (e: React.SyntheticEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleEnter = (e: React.DragEvent<HTMLInputElement>) => {\n    handleIgnore(e);\n    setDragOver(true);\n  };\n\n  const handleLeave = (e: React.DragEvent<HTMLInputElement>) => {\n    handleIgnore(e);\n    setDragOver(false);\n  };\n\n  return (\n    <div\n      className={`file-chooser__container flex-col center ${\n        dragOver ? \"file-chooser__container__dragover\" : \"\"\n      }`}\n      onDragEnter={handleEnter}\n      onDragLeave={handleLeave}\n      onDragOver={handleEnter}\n      onDrop={handleDrop}\n    >\n      <label\n        tabIndex={0}\n        className=\"file-chooser__label\"\n        onKeyUp={handleKey}\n      >\n        <span>\n          Click to select a photo\n          <br/>\n          or\n          <br />\n          drop it here\n        </span>\n        <input\n          type=\"file\"\n          accept=\"image/jpeg\"\n          onChange={handleChange}\n          className=\"hidden\"\n          ref={inputRef}\n        />\n      </label>\n    </div>\n  );\n}\n","import React, { ForwardedRef, forwardRef, useEffect, useImperativeHandle } from \"react\";\nimport \"./ImageFilter.css\";\nimport { FabricJSCanvas, useFabricJSEditor } from \"fabricjs-react\";\nimport { fabric } from \"fabric\";\n\nconst MAIN_IMAGE_KEY = \"main-image\";\n\nfunction getScaleAndPositionContain (oImg: fabric.Image, canvas: fabric.Canvas) {\n  const canvasWidth = canvas.width!;\n  const canvasHeight = canvas.height!;\n  const imgWidth = oImg.width!;\n  const imgHeight = oImg.height!;\n  const scale = Math.min(canvasHeight / imgHeight, canvasWidth / imgWidth);\n  const left = (canvasWidth - (imgWidth * scale)) / 2;\n  const top = (canvasHeight - (imgHeight * scale)) / 2;\n  return {scale, left, top};\n}\n\nfunction getScaleAndPositionCover (oImg: fabric.Image, canvas: fabric.Canvas) {\n  const canvasWidth = canvas.width!;\n  const canvasHeight = canvas.height!;\n  const imgWidth = oImg.width!;\n  const imgHeight = oImg.height!;\n  const scale = Math.max(canvasHeight / imgHeight, canvasWidth / imgWidth);\n  const left = (canvasWidth - (imgWidth * scale)) / 2;\n  const top = (canvasHeight - (imgHeight * scale)) / 2;\n  return {scale, left, top};\n}\n\nfunction getMainImage (canvas: fabric.Canvas | undefined) {\n  if(!canvas) return;\n  const mainImage = canvas.getObjects().find( o => o.name === MAIN_IMAGE_KEY);\n  return mainImage as fabric.Image;\n}\n\ninterface FilterType {\n  name: string;\n  createFilters: ()=> fabric.IBaseFilter[];\n}\n\nconst Filters: FilterType[] = [\n  {\n    name: \"No filter\",\n    createFilters: () => {\n      return [];\n    },\n  },\n  {\n    name: \"Blur\",\n    createFilters: () => {\n      return [new (fabric.Image.filters as any).Blur({\n        blur: 0.1,\n      })];\n    },\n  },\n  {\n    name: \"Vintage\",\n    createFilters: () => {\n      return [new (fabric.Image.filters as any).Vintage()];\n    },\n  },\n  {\n    name: \"Sepia\",\n    createFilters: () => {\n      return [new fabric.Image.filters.Sepia({\n        sepia: 0.5,\n      })];\n    },\n  },\n];\n\ntype ImageFilterProps = { url: string };\n\nexport type ImageFilterRef = {\n  getImageUrl: () => string | undefined,\n}\n\nexport default forwardRef<ImageFilterRef, ImageFilterProps>(ImageFilter);\n\nfunction ImageFilter({ url }: ImageFilterProps, ref: ForwardedRef<ImageFilterRef>) {\n  const { editor, onReady } = useFabricJSEditor();\n\n  useImperativeHandle(ref, () => ({\n    getImageUrl: () => {\n      return editor?.canvas.toDataURL({\n        format: 'jpeg',\n        quality: 0.85,\n      });\n    },\n  }));\n\n  const handleApplyFilter = (filter: FilterType) => {\n    const mainImage = getMainImage(editor?.canvas);\n    if(!mainImage) return;\n    mainImage.filters?.splice(0, mainImage.filters.length);\n    mainImage.filters?.push(...filter.createFilters());\n    mainImage.applyFilters();\n    editor!.canvas.renderAll();\n  };\n\n  const handleResize = () => {\n    const mainImage = getMainImage(editor?.canvas);\n    if(mainImage){\n      const {scale, left, top} = getScaleAndPositionContain(mainImage, editor!.canvas);\n      mainImage.scale(scale);\n      mainImage.left = left;\n      mainImage.top = top;\n      editor!.canvas.renderAll();\n    }\n  }\n\n  useEffect(()=>{\n    if(editor){\n      window.addEventListener('resize', handleResize);\n    }\n    return ()=> {\n      window.removeEventListener('resize', handleResize);\n    }\n  });\n\n  useEffect(() => {\n    if(!editor) return;\n    const mainImage = getMainImage(editor?.canvas);\n    if(mainImage) return;\n\n    fabric.Image.fromURL(url, function (oImg) {\n      oImg.name = MAIN_IMAGE_KEY;\n      const {scale, left, top} = getScaleAndPositionContain(oImg, editor!.canvas);\n      oImg.scale(scale);\n      oImg.left = left;\n      oImg.top = top;\n      oImg.selectable = false;\n      oImg.hoverCursor = \"default\";\n      editor.canvas.add(oImg);\n    });\n  });\n\n  return (\n    <div className=\"image-filter__root flex-col flex-grow\">\n      <FabricJSCanvas\n        className=\"image-filter__content flex-grow\"\n        onReady={onReady}\n      ></FabricJSCanvas>\n      <div className=\"filter__options-container\">\n        <div className=\"filter__options flex-row\">\n          {Filters.map((filter) => (\n            <Filter\n              key={filter.name}\n              url={url}\n              filter={filter}\n              onApplyFilter={handleApplyFilter}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction Filter({\n  url,\n  filter,\n  onApplyFilter,\n}: {\n  url: string,\n  filter: FilterType;\n  onApplyFilter: (filter: FilterType) => void;\n}) {\n  const { editor, onReady } = useFabricJSEditor();\n\n  const handleClick = () => {\n    onApplyFilter(filter);\n  };\n\n  const handleKeyup = (e: React.KeyboardEvent) => {\n    if(e.key===' ' || e.key==='Enter'){\n      onApplyFilter(filter);\n    }\n  };\n\n  React.useEffect(() => {\n    if(!editor) return;\n    const mainImage = getMainImage(editor?.canvas);\n    if(mainImage) return;\n\n    fabric.Image.fromURL(url, function (oImg) {\n      oImg.name = MAIN_IMAGE_KEY;\n      const {scale, left, top} = getScaleAndPositionCover(oImg, editor!.canvas);\n      oImg.scale(scale);\n      oImg.selectable = false;\n      oImg.left = left;\n      oImg.top = top;\n      oImg.filters?.push(...filter.createFilters());\n      oImg.applyFilters();\n      oImg.hoverCursor = \"pointer\";\n      editor.canvas.add(oImg);\n    });\n  });\n\n  return (\n    <div className=\"flex-col\" onClick={handleClick} onKeyUp={handleKeyup} onPointerUp={handleClick} tabIndex={0}>\n      <label className=\"filter__label\">{filter.name}</label>\n      <FabricJSCanvas\n        className=\"filter__thumbnail\"\n        onReady={onReady}\n      ></FabricJSCanvas>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport default function CloseIcon(props: React.ComponentProps<\"svg\">) {\n  return (\n    <svg\n      {...props}\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M6 6 L18 18\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M18 6 L6 18\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from \"react\";\r\n\r\nexport default function DownloadIcon(props: React.ComponentProps<\"svg\">) {\r\n  return (\r\n    <svg\r\n      {...props}\r\n      version=\"1.1\"\r\n      width=\"24\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 512 512\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <g>\r\n        <path\r\n          d=\"M426.635,164.217C402.969,69.94,307.358,12.698,213.08,36.364C139.404,54.858,85.907,118.535,80.395,194.297\r\n\t\t\t\tc-52.313,8.627-87.728,58.028-79.101,110.341c7.669,46.507,47.967,80.566,95.101,80.379h64v-32h-64c-35.346,0-64-28.654-64-64\r\n\t\t\t\tc0-35.346,28.654-64,64-64c8.837,0,16-7.163,16-16c-0.08-79.529,64.327-144.065,143.856-144.144\r\n\t\t\t\tc68.844-0.069,128.107,48.601,141.424,116.144c1.315,6.744,6.788,11.896,13.6,12.8c43.742,6.229,74.151,46.738,67.923,90.479\r\n\t\t\t\tc-5.593,39.278-39.129,68.523-78.803,68.721h-48v32h48c61.856-0.187,111.848-50.483,111.66-112.339\r\n\t\t\t\tC511.899,221.187,476.655,176.437,426.635,164.217z\"\r\n        fill=\"currentcolor\"\r\n        />\r\n        <path\r\n          d=\"M272.395,426.457v-153.44h-32v153.44l-36.64-36.64l-22.56,22.56l64,64c6.241,6.204,16.319,6.204,22.56,0l64-64\r\n\t\t\t\tl-22.56-22.56L272.395,426.457z\"\r\n        fill=\"currentcolor\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n","import React, { useRef } from \"react\";\nimport { FileChooser } from \"../components/FileChooser\";\nimport ImageFilter, { ImageFilterRef } from \"../containers/ImageFilter\";\nimport CloseIcon from \"../icons/CloseIcon\";\nimport DownloadIcon from \"../icons/DownloadIcon\";\nimport { downloadUrl } from \"../utils/filedownloader\";\nimport \"./FilterPage.css\";\n\nexport default function FilterPage({onClose}:{onClose: ()=> void}) {\n  const [url, setUrl] = React.useState(\"\");\n  const imageRef = useRef<ImageFilterRef>(null);\n\n  const handleSelected = (url: string)=>{\n    setUrl(url);\n  }\n\n  const handleClose = () => {\n    if(url){\n      setUrl(\"\");\n    }else{\n      onClose();\n    }\n  }\n\n  const handleDownload = () => {\n    const dataUrl = imageRef.current?.getImageUrl();\n    if(dataUrl){\n      downloadUrl(dataUrl, 'image.jpeg');\n    }\n  }\n\n  return (\n    <>\n      <header className=\"filter-page__header flex-row\">\n        {url && <button className=\"icon-button\" onClick={handleDownload}>\n          <DownloadIcon />\n        </button>}\n        <div className=\"spacer\" />\n        <button className=\"icon-button\" onClick={handleClose}>\n          <CloseIcon />\n        </button>\n      </header>\n      <section className=\"filter-page__content flex-col\">\n        {!url && <FileChooser onSelected={handleSelected}/>}\n        {url && <ImageFilter url={url} ref={imageRef}/>}\n      </section>\n    </>\n  );\n}\n\n","export function downloadUrl(url: string, filename: string) {\n  const a = document.createElement('a');\n  \n  a.href = url;\n  a.download = filename || 'download';\n  \n  const clickHandler = () => {\n    setTimeout(() => {\n      URL.revokeObjectURL(url);\n      a.removeEventListener('click', clickHandler);\n    }, 150);\n  };\n  \n  a.addEventListener('click', clickHandler, false);\n  \n  a.click();\n  \n  return a;\n}","import React from 'react';\nimport './App.css';\nimport Home from './pages/Home';\nimport FilterPage from './pages/FilterPage';\n\nfunction App() {\n  const [started, setStarted] = React.useState(false);\n\n  const handleStart = () => {\n    setStarted(true);\n  }\n\n  const handleClose = () => {\n    setStarted(false);\n  }\n\n  return (\n    <div className=\"App flex-col\">\n      {!started && <Home handleStart={handleStart}/>}\n      {started && <FilterPage onClose={handleClose}/>}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
(this.webpackJsonpinstabic=this.webpackJsonpinstabic||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(10),l=n.n(r),i=(n(15),n(3)),o=(n(16),n(17),n(0));function s(e){var t=e.handleStart;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("header",{className:"flex-col",children:Object(o.jsx)("h1",{children:"Instagram like photo editor."})}),Object(o.jsxs)("div",{className:"home__container flex-col",children:[Object(o.jsx)("p",{children:"This is a project to test fabricjs, typescript and reactjs."}),Object(o.jsxs)("p",{children:["It lets you select a photo, apply a filter to it and download it.",Object(o.jsx)("br",{}),"It is responsive.",Object(o.jsx)("br",{}),"It has a good test suit."]}),Object(o.jsx)("button",{className:"home__start",onClick:t,children:"Start"})]}),Object(o.jsx)("footer",{className:"flex-col",children:Object(o.jsx)("p",{children:"By Kayvan Arianpour"})})]})}n(19);function u(e){var t=e.onSelected,n=a.a.useState(!1),c=Object(i.a)(n,2),r=c[0],l=c[1],s=a.a.useRef(null),u=function(e){t(URL.createObjectURL(e))},f=function(e){e.preventDefault(),e.stopPropagation()},d=function(e){f(e),l(!0)};return Object(o.jsx)("div",{className:"file-chooser__container flex-col center ".concat(r?"file-chooser__container__dragover":""),onDragEnter:d,onDragLeave:function(e){f(e),l(!1)},onDragOver:d,onDrop:function(e){var t,n;if(f(e),l(!1),(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&(null===(n=e.dataTransfer)||void 0===n?void 0:n.files.length)>0){var c=e.dataTransfer.files[0];console.log(c.type),"image/jpeg"===c.type&&u(c)}},children:Object(o.jsxs)("label",{tabIndex:0,className:"file-chooser__label",onKeyUp:function(e){var t;" "!==e.key&&"Enter"!==e.key||(null===(t=s.current)||void 0===t||t.click())},children:[Object(o.jsxs)("span",{children:["Click to select a photo",Object(o.jsx)("br",{}),"or",Object(o.jsx)("br",{}),"drop it here"]}),Object(o.jsx)("input",{type:"file",accept:"image/jpeg",onChange:function(e){if(f(e),e.target.files&&e.target.files.length>0){var t=e.target.files[0];"image/jpeg"===t.type&&u(t)}},className:"hidden",ref:s})]})})}var f=n(9),d=(n(20),n(6)),j=n(2);n(29);function v(e){var t=e.value,n=e.onChange;return Object(o.jsx)("div",{className:"",children:Object(o.jsx)("input",{type:"range",min:"1",max:"100",step:"5",value:100*t,className:"slider",onChange:function(e){n(parseInt(e.currentTarget.value)/100)}})})}var b=n(4);function h(e){return Object(o.jsxs)("svg",Object(b.a)(Object(b.a)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 6 L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 6 L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}var p="main-image";function O(e,t){var n=t.width,c=t.height,a=e.width,r=e.height,l=Math.min(c/r,n/a);return{scale:l,left:(n-a*l)/2,top:(c-r*l)/2}}function g(e){if(e)return e.getObjects().find((function(e){return e.name===p}))}var x=[{name:"No filter",defaultStrength:0},{name:"Blur",defaultStrength:.1,createFilters:function(e){return[new j.fabric.Image.filters.Blur({blur:e})]}},{name:"Vintage",defaultStrength:.2,createFilters:function(e){return[new j.fabric.Image.filters.Vintage]}},{name:"Sepia",defaultStrength:.2,createFilters:function(e){return[new j.fabric.Image.filters.Sepia]}}],m=Object(c.forwardRef)(w);function w(e,t){var n=e.url,a=Object(d.b)(),r=a.editor,l=a.onReady;Object(c.useImperativeHandle)(t,(function(){return{getImageUrl:function(){return null===r||void 0===r?void 0:r.canvas.toDataURL({format:"jpeg",quality:.85})}}}));var i=function(){var e=g(null===r||void 0===r?void 0:r.canvas);if(e){var t=O(e,r.canvas),n=t.scale,c=t.left,a=t.top;e.scale(n),e.left=c,e.top=a,r.canvas.renderAll()}};return Object(c.useEffect)((function(){return r&&window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}})),Object(c.useEffect)((function(){r&&(g(null===r||void 0===r?void 0:r.canvas)||j.fabric.Image.fromURL(n,(function(e){e.name=p;var t=O(e,r.canvas),n=t.scale,c=t.left,a=t.top;e.scale(n),e.left=c,e.top=a,e.selectable=!1,e.hoverCursor="default",r.canvas.add(e)})))})),Object(o.jsxs)("div",{className:"image-filter__root flex-col flex-grow",children:[Object(o.jsx)(d.a,{className:"image-filter__content flex-grow",onReady:l}),Object(o.jsx)("div",{className:"filter__options-container relative",children:Object(o.jsx)(_,{url:n,onApplyFilter:function(e,t){var n,c,a,l=g(null===r||void 0===r?void 0:r.canvas);l&&(null===(n=l.filters)||void 0===n||n.splice(0,l.filters.length),null===(c=l.filters)||void 0===c||c.push.apply(c,Object(f.a)((null===(a=e.createFilters)||void 0===a?void 0:a.call(e,t))||[])),l.applyFilters(),r.canvas.renderAll())}})})]})}function _(e){var t=e.url,n=e.onApplyFilter,a=Object(c.useState)(""),r=Object(i.a)(a,2),l=r[0],s=r[1],u=function(e){s(e)};return Object(o.jsx)("div",{className:"filter__options flex-row",children:x.map((function(e){return Object(o.jsx)(y,{url:t,filter:e,onApplyFilter:n,selected:l,onSelected:u},e.name)}))})}function y(e){var t=e.url,n=e.filter,a=e.onApplyFilter,r=e.selected,l=e.onSelected,s=Object(d.b)(),u=s.editor,v=s.onReady,b=Object(c.useState)(n.defaultStrength),h=Object(i.a)(b,2),O=h[0],x=h[1],m=Object(c.useState)(!1),w=Object(i.a)(m,2),_=w[0],y=w[1],C=function(){r===n.name?n.createFilters&&y(!0):(a(n,O),l(n.name))};return Object(c.useEffect)((function(){u&&(g(null===u||void 0===u?void 0:u.canvas)||j.fabric.Image.fromURL(t,(function(e){var t,c;e.name=p;var a=function(e,t){var n=t.width,c=t.height,a=e.width,r=e.height,l=Math.max(c/r,n/a);return{scale:l,left:(n-a*l)/2,top:(c-r*l)/2}}(e,u.canvas),r=a.scale,l=a.left,i=a.top;e.scale(r),e.selectable=!1,e.left=l,e.top=i,null===(t=e.filters)||void 0===t||t.push.apply(t,Object(f.a)((null===(c=n.createFilters)||void 0===c?void 0:c.call(n,O))||[])),e.applyFilters(),e.hoverCursor="pointer",u.canvas.add(e)})))})),Object(o.jsxs)("div",{className:"flex-col",onKeyUp:function(e){" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),C())},onPointerUp:function(e){e.preventDefault(),e.stopPropagation(),C()},tabIndex:0,children:[Object(o.jsx)("label",{className:"filter__label",children:n.name}),Object(o.jsx)(d.a,{className:"filter__thumbnail",onReady:v}),_&&Object(o.jsx)(k,{value:O,onChange:function(e){x(e),a(n,e)},onClose:function(){y(!1)}})]})}function k(e){var t=e.value,n=e.onChange,c=e.onClose;return Object(o.jsxs)("div",{className:"filter__select-value flex-row center",children:[Object(o.jsx)("button",{className:"icon-button filter__select-value-close",onClick:c,children:Object(o.jsx)(h,{})}),Object(o.jsx)(v,{value:t,onChange:n})]})}function C(e){return Object(o.jsx)("svg",Object(b.a)(Object(b.a)({},e),{},{version:"1.1",width:"24",height:"24",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsxs)("g",{children:[Object(o.jsx)("path",{d:"M426.635,164.217C402.969,69.94,307.358,12.698,213.08,36.364C139.404,54.858,85.907,118.535,80.395,194.297\r c-52.313,8.627-87.728,58.028-79.101,110.341c7.669,46.507,47.967,80.566,95.101,80.379h64v-32h-64c-35.346,0-64-28.654-64-64\r c0-35.346,28.654-64,64-64c8.837,0,16-7.163,16-16c-0.08-79.529,64.327-144.065,143.856-144.144\r c68.844-0.069,128.107,48.601,141.424,116.144c1.315,6.744,6.788,11.896,13.6,12.8c43.742,6.229,74.151,46.738,67.923,90.479\r c-5.593,39.278-39.129,68.523-78.803,68.721h-48v32h48c61.856-0.187,111.848-50.483,111.66-112.339\r C511.899,221.187,476.655,176.437,426.635,164.217z",fill:"currentcolor"}),Object(o.jsx)("path",{d:"M272.395,426.457v-153.44h-32v153.44l-36.64-36.64l-22.56,22.56l64,64c6.241,6.204,16.319,6.204,22.56,0l64-64\r l-22.56-22.56L272.395,426.457z",fill:"currentcolor"})]})}))}n(30);function N(e){var t=e.onClose,n=a.a.useState(""),r=Object(i.a)(n,2),l=r[0],s=r[1],f=Object(c.useRef)(null);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("header",{className:"filter-page__header flex-row",children:[l&&Object(o.jsx)("button",{className:"icon-button",onClick:function(){var e,t=null===(e=f.current)||void 0===e?void 0:e.getImageUrl();t&&function(e,t){var n=document.createElement("a");n.href=e,n.download=t||"download",n.addEventListener("click",(function t(){setTimeout((function(){URL.revokeObjectURL(e),n.removeEventListener("click",t)}),150)}),!1),n.click()}(t,"image.jpeg")},children:Object(o.jsx)(C,{})}),Object(o.jsx)("div",{className:"spacer"}),Object(o.jsx)("button",{className:"icon-button",onClick:function(){l?s(""):t()},children:Object(o.jsx)(h,{})})]}),Object(o.jsxs)("section",{className:"filter-page__content flex-col",children:[!l&&Object(o.jsx)(u,{onSelected:function(e){s(e)}}),l&&Object(o.jsx)(m,{url:l,ref:f})]})]})}var S=function(){var e=a.a.useState(!1),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(o.jsxs)("div",{className:"App flex-col",children:[!n&&Object(o.jsx)(s,{handleStart:function(){c(!0)}}),n&&Object(o.jsx)(N,{onClose:function(){c(!1)}})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),c(e),a(e),r(e),l(e)}))};l.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(S,{})}),document.getElementById("root")),L()}],[[31,1,2]]]);
//# sourceMappingURL=main.30f4179a.chunk.js.map
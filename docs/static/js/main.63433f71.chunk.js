(this.webpackJsonpinstabic=this.webpackJsonpinstabic||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},30:function(e,t){},31:function(e,t){},32:function(e,t){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(10),i=n.n(a),l=(n(19),n(3)),o=(n(20),n(21),n(0));function s(e){var t=e.handleStart;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("header",{className:"flex-col",children:Object(o.jsx)("h1",{children:"Instagram like photo editor."})}),Object(o.jsxs)("div",{className:"home__container flex-col",children:[Object(o.jsx)("p",{children:"This is a project to test fabricjs, typescript and reactjs."}),Object(o.jsxs)("p",{children:["It lets you select a photo, apply a filter to it and download it.",Object(o.jsx)("br",{}),"It is responsive.",Object(o.jsx)("br",{}),"It has a good test suit."]}),Object(o.jsx)("button",{className:"home__start",onClick:t,children:"Start"})]}),Object(o.jsxs)("footer",{className:"home__footer flex-col",children:[Object(o.jsx)("p",{className:"home__footer-name",children:"By Kayvan Arianpour"}),Object(o.jsxs)("p",{className:"home__footer-version",children:["Version: ","0.2.0"]})]})]})}n(23);function u(e){var t=e.onSelected,n=r.a.useState(!1),c=Object(l.a)(n,2),a=c[0],i=c[1],s=r.a.useRef(null),u=function(e){t(URL.createObjectURL(e))},j=function(e){e.preventDefault(),e.stopPropagation()},f=function(e){j(e),i(!0)};return Object(o.jsx)("div",{className:"file-chooser__container flex-col center ".concat(a?"file-chooser__container__dragover":""),onDragEnter:f,onDragLeave:function(e){j(e),i(!1)},onDragOver:f,onDrop:function(e){var t,n;if(j(e),i(!1),(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&(null===(n=e.dataTransfer)||void 0===n?void 0:n.files.length)>0){var c=e.dataTransfer.files[0];console.log(c.type),"image/jpeg"===c.type&&u(c)}},children:Object(o.jsxs)("label",{tabIndex:0,className:"file-chooser__label",onKeyUp:function(e){var t;" "!==e.key&&"Enter"!==e.key||(null===(t=s.current)||void 0===t||t.click())},children:[Object(o.jsxs)("span",{children:["Click to select a photo",Object(o.jsx)("br",{}),"or",Object(o.jsx)("br",{}),"drop it here"]}),Object(o.jsx)("input",{type:"file",accept:"image/jpeg",onChange:function(e){if(j(e),e.target.files&&e.target.files.length>0){var t=e.target.files[0];"image/jpeg"===t.type&&u(t)}},className:"hidden",ref:s})]})})}var j=n(9),f=(n(24),n(6)),d=n(2);n(33);function h(e){var t=e.value,n=e.onChange;return Object(o.jsx)("div",{className:"",children:Object(o.jsx)("input",{type:"range",min:"1",max:"100",step:"5",value:100*t,className:"slider",onChange:function(e){n(parseInt(e.currentTarget.value)/100)}})})}var b=n(4);function v(e){return Object(o.jsxs)("svg",Object(b.a)(Object(b.a)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 6 L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 6 L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}var p="main-image";function O(e,t){var n=t.width,c=t.height,r=e.width,a=e.height,i=Math.min(c/a,n/r);return{scale:i,left:(n-r*i)/2,top:(c-a*i)/2}}function x(e){if(e)return e.getObjects().find((function(e){return e.name===p}))}var m=[{name:"No filter",defaultStrength:0},{name:"Blur",defaultStrength:.1,createFilters:function(e){return[new d.fabric.Image.filters.Blur({blur:e})]}},{name:"Vintage",defaultStrength:.2,createFilters:function(e){return[new d.fabric.Image.filters.Vintage]}},{name:"Sepia",defaultStrength:.2,createFilters:function(e){return[new d.fabric.Image.filters.Sepia]}}],g=Object(c.forwardRef)(_);function _(e,t){var n=e.url,r=Object(f.b)(),a=r.editor,i=r.onReady;Object(c.useImperativeHandle)(t,(function(){return{getImageUrl:function(){return null===a||void 0===a?void 0:a.canvas.toDataURL({format:"jpeg",quality:.85})}}}));var l=function(){var e=x(null===a||void 0===a?void 0:a.canvas);if(e){var t=O(e,a.canvas),n=t.scale,c=t.left,r=t.top;e.scale(n),e.left=c,e.top=r,a.canvas.renderAll()}};return Object(c.useEffect)((function(){return a&&window.addEventListener("resize",l),function(){window.removeEventListener("resize",l)}})),Object(c.useEffect)((function(){a&&(x(null===a||void 0===a?void 0:a.canvas)||d.fabric.Image.fromURL(n,(function(e){e.name=p;var t=O(e,a.canvas),n=t.scale,c=t.left,r=t.top;e.scale(n),e.left=c,e.top=r,e.selectable=!1,e.hoverCursor="default",a.canvas.add(e)})))})),Object(o.jsxs)("div",{className:"image-filter__root flex-col flex-grow",children:[Object(o.jsx)(f.a,{className:"image-filter__content flex-grow",onReady:i}),Object(o.jsx)("div",{className:"filter__options-container relative",children:Object(o.jsx)(w,{url:n,onApplyFilter:function(e,t){var n,c,r,i=x(null===a||void 0===a?void 0:a.canvas);i&&(null===(n=i.filters)||void 0===n||n.splice(0,i.filters.length),null===(c=i.filters)||void 0===c||c.push.apply(c,Object(j.a)((null===(r=e.createFilters)||void 0===r?void 0:r.call(e,t))||[])),i.applyFilters(),a.canvas.renderAll())}})})]})}function w(e){var t=e.url,n=e.onApplyFilter,r=Object(c.useState)(""),a=Object(l.a)(r,2),i=a[0],s=a[1],u=function(e){s(e)};return Object(o.jsx)("div",{className:"filter__options flex-row",children:m.map((function(e){return Object(o.jsx)(y,{url:t,filter:e,onApplyFilter:n,selected:i,onSelected:u},e.name)}))})}function y(e){var t=e.url,n=e.filter,r=e.onApplyFilter,a=e.selected,i=e.onSelected,s=Object(f.b)(),u=s.editor,h=s.onReady,b=Object(c.useState)(n.defaultStrength),v=Object(l.a)(b,2),O=v[0],m=v[1],g=Object(c.useState)(!1),_=Object(l.a)(g,2),w=_[0],y=_[1],k=function(){a===n.name?n.createFilters&&y(!0):(r(n,O),i(n.name))};return Object(c.useEffect)((function(){u&&(x(null===u||void 0===u?void 0:u.canvas)||d.fabric.Image.fromURL(t,(function(e){var t,c;e.name=p;var r=function(e,t){var n=t.width,c=t.height,r=e.width,a=e.height,i=Math.max(c/a,n/r);return{scale:i,left:(n-r*i)/2,top:(c-a*i)/2}}(e,u.canvas),a=r.scale,i=r.left,l=r.top;e.scale(a),e.selectable=!1,e.left=i,e.top=l,null===(t=e.filters)||void 0===t||t.push.apply(t,Object(j.a)((null===(c=n.createFilters)||void 0===c?void 0:c.call(n,O))||[])),e.applyFilters(),e.hoverCursor="pointer",u.canvas.add(e)})))})),Object(o.jsxs)("div",{className:"flex-col",onKeyUp:function(e){" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),k())},onPointerUp:function(e){e.preventDefault(),e.stopPropagation(),k()},tabIndex:0,children:[Object(o.jsx)("label",{className:"filter__label",children:n.name}),Object(o.jsx)(f.a,{className:"filter__thumbnail",onReady:h}),w&&Object(o.jsx)(N,{value:O,onChange:function(e){m(e),r(n,e)},onClose:function(){y(!1)}})]})}function N(e){var t=e.value,n=e.onChange,c=e.onClose;return Object(o.jsxs)("div",{className:"filter__select-value flex-row center",children:[Object(o.jsx)("button",{className:"icon-button filter__select-value-close",onClick:c,children:Object(o.jsx)(v,{})}),Object(o.jsx)(h,{value:t,onChange:n})]})}function k(e){return Object(o.jsx)("svg",Object(b.a)(Object(b.a)({},e),{},{version:"1.1",width:"24",height:"24",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsxs)("g",{children:[Object(o.jsx)("path",{d:"M426.635,164.217C402.969,69.94,307.358,12.698,213.08,36.364C139.404,54.858,85.907,118.535,80.395,194.297\r c-52.313,8.627-87.728,58.028-79.101,110.341c7.669,46.507,47.967,80.566,95.101,80.379h64v-32h-64c-35.346,0-64-28.654-64-64\r c0-35.346,28.654-64,64-64c8.837,0,16-7.163,16-16c-0.08-79.529,64.327-144.065,143.856-144.144\r c68.844-0.069,128.107,48.601,141.424,116.144c1.315,6.744,6.788,11.896,13.6,12.8c43.742,6.229,74.151,46.738,67.923,90.479\r c-5.593,39.278-39.129,68.523-78.803,68.721h-48v32h48c61.856-0.187,111.848-50.483,111.66-112.339\r C511.899,221.187,476.655,176.437,426.635,164.217z",fill:"currentcolor"}),Object(o.jsx)("path",{d:"M272.395,426.457v-153.44h-32v153.44l-36.64-36.64l-22.56,22.56l64,64c6.241,6.204,16.319,6.204,22.56,0l64-64\r l-22.56-22.56L272.395,426.457z",fill:"currentcolor"})]})}))}n(34);function C(e){var t=e.onClose,n=r.a.useState(""),a=Object(l.a)(n,2),i=a[0],s=a[1],j=Object(c.useRef)(null);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("header",{className:"filter-page__header flex-row",children:[i&&Object(o.jsx)("button",{className:"icon-button",onClick:function(){var e,t=null===(e=j.current)||void 0===e?void 0:e.getImageUrl();t&&function(e,t){var n=document.createElement("a");n.href=e,n.download=t||"download",n.addEventListener("click",(function t(){setTimeout((function(){URL.revokeObjectURL(e),n.removeEventListener("click",t)}),150)}),!1),n.click()}(t,"image.jpeg")},children:Object(o.jsx)(k,{})}),Object(o.jsx)("div",{className:"spacer"}),Object(o.jsx)("button",{className:"icon-button",onClick:function(){i?s(""):t()},children:Object(o.jsx)(v,{})})]}),Object(o.jsxs)("section",{className:"filter-page__content flex-col",children:[!i&&Object(o.jsx)(u,{onSelected:function(e){s(e)}}),i&&Object(o.jsx)(g,{url:i,ref:j})]})]})}var S=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(o.jsxs)("div",{className:"App flex-col",children:[!n&&Object(o.jsx)(s,{handleStart:function(){c(!0)}}),n&&Object(o.jsx)(C,{onClose:function(){c(!1)}})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},L=n(11),I=n(12),R=n(14),E=n(13);function D(){return Object(o.jsxs)("section",{className:"flex-col center",children:[Object(o.jsx)("h1",{children:"Something went wrong."}),Object(o.jsx)("p",{children:"Please check if you are using the latest version of you browser."}),Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("p",{className:"",children:"Tested versions are:"}),Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:"Desctop Chrome 91"}),Object(o.jsx)("li",{children:"Desctop FireFox 89"}),Object(o.jsx)("li",{children:"Desctop Safari 14"}),Object(o.jsx)("li",{children:"Mobile Chrome 91"}),Object(o.jsx)("li",{children:"Mobile Samsung Internet 14"})]})]})]})}var U=function(e){Object(R.a)(n,e);var t=Object(E.a)(n);function n(e){var c;return Object(L.a)(this,n),(c=t.call(this,e)).state={hasError:!1},c}return Object(I.a)(n,[{key:"componentDidCatch",value:function(e,t){console.error()}},{key:"render",value:function(){return this.state.hasError?Object(o.jsx)(D,{}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.a.Component);i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(U,{children:Object(o.jsx)(S,{})})}),document.getElementById("root")),F()}},[[35,1,2]]]);
//# sourceMappingURL=main.63433f71.chunk.js.map
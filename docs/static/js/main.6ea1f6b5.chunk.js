(this.webpackJsonpinstabic=this.webpackJsonpinstabic||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(10),i=n.n(a),l=(n(15),n(3)),o=(n(16),n(17),n(0));function s(e){var t=e.handleStart;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("header",{className:"flex-col",children:Object(o.jsx)("h1",{children:"Instagram like photo editor."})}),Object(o.jsxs)("div",{className:"home__container flex-col",children:[Object(o.jsx)("p",{children:"This is a project to test fabricjs, typescript and reactjs."}),Object(o.jsxs)("p",{children:["It lets you select a photo, apply a filter to it and download it.",Object(o.jsx)("br",{}),"It is responsive.",Object(o.jsx)("br",{}),"It has a good test suit."]}),Object(o.jsx)("button",{className:"home__start",onClick:t,children:"Start"})]}),Object(o.jsx)("footer",{className:"flex-col",children:Object(o.jsx)("p",{children:"By Kayvan Arianpour"})})]})}n(19);function f(e){var t=e.onSelected,n=r.a.useState(!1),c=Object(l.a)(n,2),a=c[0],i=c[1],s=r.a.useRef(null),f=function(e){t(URL.createObjectURL(e))},u=function(e){e.preventDefault(),e.stopPropagation()},d=function(e){u(e),i(!0)};return Object(o.jsx)("div",{className:"file-chooser__container flex-col center ".concat(a?"file-chooser__container__dragover":""),onDragEnter:d,onDragLeave:function(e){u(e),i(!1)},onDragOver:d,onDrop:function(e){var t,n;if(u(e),i(!1),(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&(null===(n=e.dataTransfer)||void 0===n?void 0:n.files.length)>0){var c=e.dataTransfer.files[0];console.log(c.type),"image/jpeg"===c.type&&f(c)}},children:Object(o.jsxs)("label",{tabIndex:0,className:"file-chooser__label",onKeyUp:function(e){var t;" "!==e.key&&"Enter"!==e.key||(null===(t=s.current)||void 0===t||t.click())},children:[Object(o.jsxs)("span",{children:["Click to select a photo",Object(o.jsx)("br",{}),"or",Object(o.jsx)("br",{}),"drop it here"]}),Object(o.jsx)("input",{type:"file",accept:"image/jpeg",onChange:function(e){if(u(e),e.target.files&&e.target.files.length>0){var t=e.target.files[0];"image/jpeg"===t.type&&f(t)}},className:"hidden",ref:s})]})})}var u=n(9),d=(n(20),n(6)),j=n(2),b="main-image";function v(e,t){var n=t.width,c=t.height,r=e.width,a=e.height,i=Math.min(c/a,n/r);return{scale:i,left:(n-r*i)/2,top:(c-a*i)/2}}function h(e){if(e)return e.getObjects().find((function(e){return e.name===b}))}var p=[{name:"No filter",createFilters:function(){return[]}},{name:"Blur",createFilters:function(){return[new j.fabric.Image.filters.Blur({blur:.1})]}},{name:"Vintage",createFilters:function(){return[new j.fabric.Image.filters.Vintage]}},{name:"Sepia",createFilters:function(){return[new j.fabric.Image.filters.Sepia({sepia:.5})]}}],O=Object(c.forwardRef)(m);function m(e,t){var n=e.url,r=Object(d.b)(),a=r.editor,i=r.onReady;Object(c.useImperativeHandle)(t,(function(){return{getImageUrl:function(){return null===a||void 0===a?void 0:a.canvas.toDataURL({format:"jpeg",quality:.85})}}}));var l=function(e){var t,n,c=h(null===a||void 0===a?void 0:a.canvas);c&&(null===(t=c.filters)||void 0===t||t.splice(0,c.filters.length),null===(n=c.filters)||void 0===n||n.push.apply(n,Object(u.a)(e.createFilters())),c.applyFilters(),a.canvas.renderAll())},s=function(){var e=h(null===a||void 0===a?void 0:a.canvas);if(e){var t=v(e,a.canvas),n=t.scale,c=t.left,r=t.top;e.scale(n),e.left=c,e.top=r,a.canvas.renderAll()}};return Object(c.useEffect)((function(){return a&&window.addEventListener("resize",s),function(){window.removeEventListener("resize",s)}})),Object(c.useEffect)((function(){a&&(h(null===a||void 0===a?void 0:a.canvas)||j.fabric.Image.fromURL(n,(function(e){e.name=b;var t=v(e,a.canvas),n=t.scale,c=t.left,r=t.top;e.scale(n),e.left=c,e.top=r,e.selectable=!1,e.hoverCursor="default",a.canvas.add(e)})))})),Object(o.jsxs)("div",{className:"image-filter__root flex-col flex-grow",children:[Object(o.jsx)(d.a,{className:"image-filter__content flex-grow",onReady:i}),Object(o.jsx)("div",{className:"filter__options-container",children:Object(o.jsx)("div",{className:"filter__options flex-row",children:p.map((function(e){return Object(o.jsx)(x,{url:n,filter:e,onApplyFilter:l},e.name)}))})})]})}function x(e){var t=e.url,n=e.filter,c=e.onApplyFilter,a=Object(d.b)(),i=a.editor,l=a.onReady,s=function(){c(n)};return r.a.useEffect((function(){i&&(h(null===i||void 0===i?void 0:i.canvas)||j.fabric.Image.fromURL(t,(function(e){var t;e.name=b;var c=function(e,t){var n=t.width,c=t.height,r=e.width,a=e.height,i=Math.max(c/a,n/r);return{scale:i,left:(n-r*i)/2,top:(c-a*i)/2}}(e,i.canvas),r=c.scale,a=c.left,l=c.top;e.scale(r),e.selectable=!1,e.left=a,e.top=l,null===(t=e.filters)||void 0===t||t.push.apply(t,Object(u.a)(n.createFilters())),e.applyFilters(),e.hoverCursor="pointer",i.canvas.add(e)})))})),Object(o.jsxs)("div",{className:"flex-col",onClick:s,onKeyUp:function(e){" "!==e.key&&"Enter"!==e.key||c(n)},onPointerUp:s,tabIndex:0,children:[Object(o.jsx)("label",{className:"filter__label",children:n.name}),Object(o.jsx)(d.a,{className:"filter__thumbnail",onReady:l})]})}var g=n(4);function w(e){return Object(o.jsxs)("svg",Object(g.a)(Object(g.a)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 6 L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 6 L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}function _(e){return Object(o.jsx)("svg",Object(g.a)(Object(g.a)({},e),{},{version:"1.1",width:"24",height:"24",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsxs)("g",{children:[Object(o.jsx)("path",{d:"M426.635,164.217C402.969,69.94,307.358,12.698,213.08,36.364C139.404,54.858,85.907,118.535,80.395,194.297\r c-52.313,8.627-87.728,58.028-79.101,110.341c7.669,46.507,47.967,80.566,95.101,80.379h64v-32h-64c-35.346,0-64-28.654-64-64\r c0-35.346,28.654-64,64-64c8.837,0,16-7.163,16-16c-0.08-79.529,64.327-144.065,143.856-144.144\r c68.844-0.069,128.107,48.601,141.424,116.144c1.315,6.744,6.788,11.896,13.6,12.8c43.742,6.229,74.151,46.738,67.923,90.479\r c-5.593,39.278-39.129,68.523-78.803,68.721h-48v32h48c61.856-0.187,111.848-50.483,111.66-112.339\r C511.899,221.187,476.655,176.437,426.635,164.217z",fill:"currentcolor"}),Object(o.jsx)("path",{d:"M272.395,426.457v-153.44h-32v153.44l-36.64-36.64l-22.56,22.56l64,64c6.241,6.204,16.319,6.204,22.56,0l64-64\r l-22.56-22.56L272.395,426.457z",fill:"currentcolor"})]})}))}n(29);function y(e){var t=e.onClose,n=r.a.useState(""),a=Object(l.a)(n,2),i=a[0],s=a[1],u=Object(c.useRef)(null);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("header",{className:"filter-page__header flex-row",children:[i&&Object(o.jsx)("button",{className:"icon-button",onClick:function(){var e,t=null===(e=u.current)||void 0===e?void 0:e.getImageUrl();t&&function(e,t){var n=document.createElement("a");n.href=e,n.download=t||"download",n.addEventListener("click",(function t(){setTimeout((function(){URL.revokeObjectURL(e),n.removeEventListener("click",t)}),150)}),!1),n.click()}(t,"image.jpeg")},children:Object(o.jsx)(_,{})}),Object(o.jsx)("div",{className:"spacer"}),Object(o.jsx)("button",{className:"icon-button",onClick:function(){i?s(""):t()},children:Object(o.jsx)(w,{})})]}),Object(o.jsxs)("section",{className:"filter-page__content flex-col",children:[!i&&Object(o.jsx)(f,{onSelected:function(e){s(e)}}),i&&Object(o.jsx)(O,{url:i,ref:u})]})]})}var k=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(o.jsxs)("div",{className:"App flex-col",children:[!n&&Object(o.jsx)(s,{handleStart:function(){c(!0)}}),n&&Object(o.jsx)(y,{onClose:function(){c(!1)}})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(k,{})}),document.getElementById("root")),L()}],[[30,1,2]]]);
//# sourceMappingURL=main.6ea1f6b5.chunk.js.map